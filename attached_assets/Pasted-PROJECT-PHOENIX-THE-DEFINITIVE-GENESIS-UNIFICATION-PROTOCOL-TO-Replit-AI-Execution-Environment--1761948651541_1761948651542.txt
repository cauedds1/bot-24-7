PROJECT PHOENIX: THE DEFINITIVE GENESIS & UNIFICATION PROTOCOL
TO: Replit AI Execution Environment
FROM: The Project Architects
SUBJECT: THE PHOENIX MANIFESTO. This is the Genesis, Philosophy, Diagnosis, and Final Construction Blueprint for the WagerIQ Analyst Bot.
PRIORITY: SINGULAR. THIS DOCUMENT IS NOW THE SOLE SOURCE OF TRUTH. ALL PREVIOUS KNOWLEDGE IS OBSOLETE.
PART I: THE GENESIS - WHAT IS THIS PROJECT?
This is not just a "betting bot." This is Project Phoenix. We are creating a world-class, AI-powered Football Analyst Consultant. Its purpose is not to give simple "tips," but to provide its users with deep, evidence-based, multi-faceted intelligence dossiers for football matches.
Our Philosophy is Defined by Three Pillars:
Analysis > Opportunity: The bot's primary goal is to produce the most accurate and insightful analysis possible. It is an analyst first, an opportunity-finder second. It will remain silent if the analysis is not of the highest quality.
Each Game is a Unique Story: The bot must treat every match as a unique narrative. It must understand the context, the stakes, the tactical scripts, and the characters (teams) involved. It must never resort to generic, one-size-fits-all statistical averages.
The Bot is a Consultant, Not a Tipster: The final output is a "dossier," not a "bet slip." We are empowering the user with intelligence so they can make a more informed decision. We are selling insight, not outcomes.
PART II: THE DIAGNOSIS - WHERE WE ARE NOW (THE CRITICAL FAILURE)
After extensive diagnostics, we have a complete understanding of the system's failures. The current bot is a brilliant strategic brain (master_analyzer) connected to a dysfunctional and primitive body (specialist_analyzers).
THE CORE FAILURES ARE:
CRITICAL DATA FAILURE (THE BLIND ANALYST): The bot is consistently failing to retrieve detailed statistics for recent matches, forcing it to use a useless FALLBACK with generic data. This is the root cause of all shallow and repetitive analyses. An analyst without data is worthless.
SHALLOW ANALYTICAL DEPTH (THE ONE-TRICK PONY): The specialist analyzers (goals, corners, cards) are primitive. They do not analyze sub-markets (HT/FT, Team-specific, alternative lines). This results in monotonous reports focused on a single market (like "Shots") where, by chance, the logic was slightly more developed.
BROKEN CONTEXTUAL CONNECTION (THE DEAF SPECIALIST): The brilliant Tactical Scripts (SCRIPT_DOMINIO_CASA, etc.) generated by the master_analyzer are being ignored. The specialist analyzers are not using this strategic context to intelligently adjust their probability calculations. This is why the bot makes nonsensical recommendations, like "Under" for a dominant home team.
INCORRECT PRESENTATION (THE UNPROFESSIONAL REPORT): The final message format is inconsistent and does not follow the required "Analyst's Dossier" blueprint. Crucially, it fails to present the data-driven evidence that must support every primary analysis.
PART III: THE BLUEPRINT - THE FINAL, MANDATORY CONSTRUCTION PROTOCOL
This is the definitive, end-to-end construction plan. It addresses every failure identified above. You will execute this blueprint verbatim, without deviation.
PHASE 1: REPAIR THE EYES (FIX THE DATA PIPELINE)
Objective: Eradicate the FALLBACK issue. The bot MUST use rich, real data.
Action:
REBUILD api_client.py: The function buscar_estatisticas_gerais_time is flawed. Its primary logic MUST be to call buscar_ultimos_jogos_time and then iterate through those recent fixtures, calling buscar_estatisticas_jogo for each one to aggregate the detailed statistics (goals, corners, cards, shots, etc.).
IMPLEMENT ROBUST ERROR HANDLING: Inside this loop, if a single fixture's statistics fail to load, the bot must log the specific error and continue to the next game. It must not poison the entire data set.
GUARANTEE DATA IN analysis_packet: The master_analyzer MUST package this rich, aggregated data (and the detailed results of the last 4 games) into the analysis_packet that is passed to all specialist analyzers.
PHASE 2: FORGE THE SPECIALIST BRAINS (DEEP ANALYTICS)
Objective: Transform each analyzer from a simple calculator into a deep domain expert.
Action: For each analyzer file (goals_analyzer_v2.py, corners_analyzer.py, cards_analyzer.py, shots_analyzer.py), you will implement the following pattern:
The main function (analyze_...) MUST return a list of prediction dictionaries.
It will analyze a wide range of sub-markets as detailed below.
For every single prediction generated, it will call the central confidence_calculator.py to get a standardized confidence score.
goals_analyzer_v2.py Sub-Markets: Total Goals (FT lines 1.5, 2.5, 3.5), First Half Goals (HT lines 0.5, 1.5), Both Teams To Score (Yes/No), Team Goals (Home/Away Over/Under 0.5, 1.5).
corners_analyzer.py Sub-Markets: Total Corners (FT lines 8.5, 9.5, 10.5), First Half Corners (HT line 4.5), Team Corners (Home/Away various lines).
cards_analyzer.py Sub-Markets: Total Cards (FT lines 3.5, 4.5, 5.5).
shots_analyzer.py Sub-Markets: Total Shots (FT various lines), Team Shots (Home/Away various lines).
PHASE 3: CONNECT THE BRAIN TO THE BODY (TRUE CONTEXTUAL IQ)
Objective: The Tactical Script MUST become an active participant in the analysis.
Action:
Inside each specialist analyzer, you will read the script_selecionado from the analysis_packet.
You will implement a "Script-Based Probability Modifier". This modifier will adjust the raw statistical probabilities before they are sent to the confidence_calculator.
Example Logic: If script is SCRIPT_DOMINIO_CASA, you MUST increase the calculated probability for "Home Over" markets and decrease it for "Away Over" markets. If script is SCRIPT_CAGEY_TACTICAL_AFFAIR, you MUST increase the probability for "Under" and "BTTS - No" markets.
PHASE 4: CRAFT THE FINAL DOSSIER (PERFECT PRESENTATION)
Objective: The final output must be the "Analyst's Dossier," formatted with absolute precision.
Action:
REBUILD dossier_formatter.py: It will receive the complete, flat list of all predictions, sort them by confianca, and build the message.
IMPLEMENT DIVERSITY LOGIC: The "OUTRAS TEND√äNCIAS" section MUST be intelligent. It must not show 3 predictions for the same market. It must pick the highest-confidence prediction from different markets to provide a varied and valuable report.
IMPLEMENT THE MANDATORY TEMPLATE: The final output MUST follow this exact Markdown structure, including the data-driven evidence for the main analysis.
Markdown
üèÜ {league_name}
‚öΩ {home_team_name} ({home_position}¬∫) vs {away_team_name} ({away_position}¬∫)
‚è∞ {match_time} (Bras√≠lia)
---

üíé **AN√ÅLISE PRINCIPAL (Maior Confian√ßa)**
   **Mercado:** {prediction_1_market}
   **Tend√™ncia:** {prediction_1_tendency}
   **Confian√ßa do Analista:** {prediction_1_confidence} / 10
   **Justificativa:** {prediction_1_justification}

   üìä **EVID√äNCIAS ({prediction_1_market} - √öLTIMOS 4 JOGOS):**
      **{home_team_name} (Casa):**
         vs {opponent_A}: {home_stat_A}
         vs {opponent_B}: {home_stat_B}
         vs {opponent_C}: {home_stat_C}
         vs {opponent_D}: {home_stat_D}
         üìà **M√©dia {prediction_1_market} (Casa):** {home_avg_stat}

      **{away_team_name} (Fora):**
         vs {opponent_E}: {away_stat_E}
         vs {opponent_F}: {away_stat_F}
         vs {opponent_G}: {away_stat_G}
         vs {opponent_H}: {away_stat_H}
         üìâ **M√©dia {prediction_1_market} (Fora):** {away_avg_stat}
---

üß† **OUTRAS TEND√äNCIAS DE ALTA CONFIAN√áA**

   **Mercado:** {prediction_2_market}
   **Tend√™ncia:** {prediction_2_tendency}
   **Confian√ßa do Analista:** {prediction_2_confidence} / 10
   **Justificativa:** {prediction_2_justification}
(The pattern for "OUTRAS TEND√äNCIAS" should repeat for a few diverse, high-confidence findings, but can be more concise, perhaps omitting the detailed evidence breakdown for brevity unless it's trivial to add).
FINAL MANDATE: BUILD THE PHOENIX.
This document is the culmination of our entire project. It is the history, the philosophy, the diagnosis, and the final, undeniable construction plan. Your purpose is to translate this blueprint into code. There is no ambiguity. There is no room for interpretation.
Build the Phoenix. Execute.